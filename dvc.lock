schema: '2.0'
stages:
  build_concept_bank:
    cmd: "python -m scripts.data.build_concept_bank --datasets isic2018 isic2019 isic2020
      derm7pt nih_cxr padchest --output data/concepts/concept_bank.json\n"
    deps:
    - path: scripts/data/build_concept_bank.py
      hash: md5
      md5: 0627f9f81a6281da8b23053a06474ef1
      size: 4925
    - path: scripts/data/preprocess_data.py
      hash: md5
      md5: a05711930d37a2c4111a06d80394d724
      size: 18511
    outs:
    - path: data/concepts/concept_bank.json
      hash: md5
      md5: 73c32cbaf3c41f6bb2ad7141078942db
      size: 2752
  preprocess_isic2019:
    cmd: "python -m scripts.data.preprocess_data --dataset isic2019 --image-size 224
      --normalize zero_one --to-hdf5 --output-dir data/processed/isic2019\n"
    deps:
    - path: F:/data/isic_2019/metadata.csv
      hash: md5
      md5: 8244c01dd29cb7daceb0adc89ccfba08
      size: 1243042
    - path: scripts/data/preprocess_data.py
      hash: md5
      md5: 2dc31530083b2c49574425b880274abe
      size: 27694
    outs:
    - path: data/processed/isic2019
      hash: md5
      md5: ff869f25698f207ca679d8aba1cf143e.dir
      size: 3093899849
      nfiles: 20917
  preprocess_isic2018:
    cmd: "python -m scripts.data.preprocess_data --dataset isic2018 --image-size 224
      --normalize zero_one --to-hdf5 --output-dir data/processed/isic2018\n"
    deps:
    - path: F:/data/isic_2018/metadata.csv
      hash: md5
      md5: 3c63f9df4bde6f5130fef6add216db67
      size: 817632
    - path: scripts/data/preprocess_data.py
      hash: md5
      md5: 2dc31530083b2c49574425b880274abe
      size: 27694
    outs:
    - path: data/processed/isic2018
      hash: md5
      md5: 4d4960cd0028113f4ce26c9189172508.dir
      size: 1746575663
      nfiles: 11723
  build_concept_bank_isic2018:
    cmd: "python -m scripts.data.build_concept_bank --dataset isic2018 --metadata-csv
      F:/data/isic_2018/metadata.csv --output-path data/concepts/isic2018_concept_bank.json\n"
    deps:
    - path: F:/data/isic_2018/metadata.csv
      hash: md5
      md5: 3c63f9df4bde6f5130fef6add216db67
      size: 817632
    - path: data/processed/isic2018
      hash: md5
      md5: 4d4960cd0028113f4ce26c9189172508.dir
      size: 1746575663
      nfiles: 11723
    - path: scripts/data/build_concept_bank.py
      hash: md5
      md5: ac42732a9539f788f24d5962b0eaec71
      size: 12793
    outs:
    - path: data/concepts/isic2018_concept_bank.json
      hash: md5
      md5: a03a98afb8761353443cbbdc5c5cf966
      size: 295472
  build_concept_bank_isic2019:
    cmd: "python -m scripts.data.build_concept_bank --dataset isic2019 --metadata-csv
      F:/data/isic_2019/metadata.csv --output-path data/concepts/isic2019_concept_bank.json\n"
    deps:
    - path: F:/data/isic_2019/metadata.csv
      hash: md5
      md5: 8244c01dd29cb7daceb0adc89ccfba08
      size: 1243042
    - path: data/processed/isic2019
      hash: md5
      md5: ff869f25698f207ca679d8aba1cf143e.dir
      size: 3093899849
      nfiles: 20917
    - path: scripts/data/build_concept_bank.py
      hash: md5
      md5: ac42732a9539f788f24d5962b0eaec71
      size: 12793
    outs:
    - path: data/concepts/isic2019_concept_bank.json
      hash: md5
      md5: 61d367e3e5cbed7131da44f827f51cbc
      size: 523817
  preprocess_isic2020:
    cmd: "python -m scripts.data.preprocess_data --dataset isic2020 --image-size 224
      --normalize zero_one --to-hdf5 --output-dir data/processed/isic2020\n"
    deps:
    - path: F:/data/isic_2020/metadata.csv
      hash: md5
      md5: fd5a4df0bf6457e9590e8cc517da0fa8
      size: 1757596
    - path: scripts/data/preprocess_data.py
      hash: md5
      md5: 2dc31530083b2c49574425b880274abe
      size: 27694
    outs:
    - path: data/processed/isic2020
      hash: md5
      md5: 66d8de10ee979ec513972cce7a87634a.dir
      size: 4136444830
      nfiles: 29816
  build_concept_bank_isic2020:
    cmd: "python -m scripts.data.build_concept_bank --dataset isic2020 --metadata-csv
      F:/data/isic_2020/metadata.csv --output-path data/concepts/isic2020_concept_bank.json\n"
    deps:
    - path: F:/data/isic_2020/metadata.csv
      hash: md5
      md5: fd5a4df0bf6457e9590e8cc517da0fa8
      size: 1757596
    - path: data/processed/isic2020
      hash: md5
      md5: 66d8de10ee979ec513972cce7a87634a.dir
      size: 4136444830
      nfiles: 29816
    - path: scripts/data/build_concept_bank.py
      hash: md5
      md5: ac42732a9539f788f24d5962b0eaec71
      size: 12793
    outs:
    - path: data/concepts/isic2020_concept_bank.json
      hash: md5
      md5: f0556cb99ad895e5ad3671409a8eab97
      size: 746289
  preprocess_derm7pt:
    cmd: "python -m scripts.data.preprocess_data --dataset derm7pt --image-size 224
      --normalize zero_one --to-hdf5 --output-dir data/processed/derm7pt\n"
    deps:
    - path: F:/data/derm7pt/metadata.csv
      hash: md5
      md5: 102f5bf664fe89d9cadf2ea0807abf4e
      size: 112117
    - path: scripts/data/preprocess_data.py
      hash: md5
      md5: 2dc31530083b2c49574425b880274abe
      size: 27694
    outs:
    - path: data/processed/derm7pt
      hash: md5
      md5: 6e796a42603261f2d3b0acf37a3617fb.dir
      size: 161496194
      nfiles: 912
  build_concept_bank_derm7pt:
    cmd: "python -m scripts.data.build_concept_bank --dataset derm7pt --metadata-csv
      F:/data/derm7pt/metadata.csv --output-path data/concepts/derm7pt_concept_bank.json\n"
    deps:
    - path: F:/data/derm7pt/metadata.csv
      hash: md5
      md5: 102f5bf664fe89d9cadf2ea0807abf4e
      size: 112117
    - path: data/processed/derm7pt
      hash: md5
      md5: 6e796a42603261f2d3b0acf37a3617fb.dir
      size: 161496194
      nfiles: 912
    - path: scripts/data/build_concept_bank.py
      hash: md5
      md5: ac42732a9539f788f24d5962b0eaec71
      size: 12793
    outs:
    - path: data/concepts/derm7pt_concept_bank.json
      hash: md5
      md5: 3ff6e11237eb4737a2a059b7a22ec80d
      size: 18289
